//using Colossal.Menu;
//using Colossal.Patches;
//using ExitGames.Client.Photon;
//using GorillaNetworking;
//using GorillaTag.Cosmetics;
//using GorillaTagScripts;
//using HarmonyLib;
//using Ionic.Zlib;
//using Photon.Pun;
//using Photon.Realtime;
//using System;
//using System.Collections;
//using System.Collections.Generic;
//using System.Linq;
//using System.Reflection;
//using System.Text;
//using System.Threading.Tasks;
//using UnityEngine;
//using UnityEngine.XR;

//namespace Colossal.Mods
//{
//    public class CrashAllFirework : MonoBehaviour
//    {
//        private static float Garfield = 0f;
//        public static Firecracker[] archivefirecrackers = null;
//        public void Update()
//        {
//            if (PluginConfig.crashallfirework)
//            {
//                VRRig.LocalRig.enabled = false;
//                VRRig.LocalRig.transform.position = new Vector3(-51.4897f, 16.9286f, -120.1083f);

//                bool didThing = false;
//                foreach (Firecracker firecracker in GetFireCrackers())
//                {
//                    if (firecracker.IsLocalObject())
//                    {
//                        didThing = true;
//                        if (Time.time > Garfield)
//                        {
//                            Garfield = Time.time + 0.1f;
//                            PhotonEvent Event = ((RubberDuckEvents)typeof(Firecracker).GetField("_events", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance).GetValue(firecracker)).Activate;

//                            for (int i = 0; i < 40; i++)
//                                Event.RaiseOthers(new object[] { new Vector3(-124.7134f, 16.4475f, -225.778f), Quaternion.identity, Vector3.zero, 1f });

//                            RPCProtection.SkiddedRPCProtection();

//                        }
//                    }
//                }
//                if (!didThing)
//                {
//                    CosmeticsController.instance.ApplyCosmeticItemToSet(CosmeticsController.instance.currentWornSet, CosmeticsController.instance.GetItemFromDict("LMANZ."), true, false);
//                    CosmeticsController.instance.ApplyCosmeticItemToSet(VRRig.LocalRig.tryOnSet, CosmeticsController.instance.GetItemFromDict("LMANZ."), true, false);
//                    CosmeticsController.instance.UpdateWornCosmetics(PhotonNetwork.InRoom);
//                    archivefirecrackers = null;
//                    RPCProtection.SkiddedRPCProtection();
//                }
//            }
//            else
//            {
//                if (!VRRig.LocalRig.enabled)
//                    VRRig.LocalRig.enabled = true;

//                Destroy(this.GetComponent<CrashAllFirework>());
//            }
//        }
//        public static Firecracker[] GetFireCrackers()
//        {
//            if (Time.time > Garfield)
//            {
//                archivefirecrackers = null;
//                Garfield = Time.time + 5f;
//            }
//            if (archivefirecrackers == null)
//            {
//                archivefirecrackers = UnityEngine.Object.FindObjectsOfType<Firecracker>();
//            }
//            return archivefirecrackers.ToArray();
//        }
//    }
//}
