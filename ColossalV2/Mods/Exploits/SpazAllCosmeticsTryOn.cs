﻿//using Colossal.Menu;
//using Colossal.Patches;
//using ExitGames.Client.Photon;
//using GorillaNetworking;
//using GorillaTagScripts;
//using Photon.Pun;
//using Photon.Realtime;
//using Photon.Voice.Unity;
//using Photon.Voice.Unity.UtilityScripts;
//using PlayFab;
//using PlayFab.GroupsModels;
//using POpusCodec.Enums;
//using System;
//using System.Collections;
//using System.Collections.Generic;
//using System.Linq;
//using System.Reflection;
//using System.Text;
//using System.Text.RegularExpressions;
//using System.Threading.Tasks;
//using Unity.Mathematics;
//using UnityEngine;
//using UnityEngine.XR;

//namespace Colossal.Mods
//{
//    public class SpazAllCosmeicsTryOn : MonoBehaviour
//    {
//        private static List<string> tryon = null;
//        public static string[] GetTryOnCosmetics()
//        {
//            if (tryon == null)
//            {
//                tryon = new List<string> { };
//                foreach (CosmeticsController.CosmeticItem dearlord in CosmeticsController.instance.allCosmetics)
//                {
//                    if (dearlord.canTryOn)
//                    {
//                        Debug.Log(dearlord.itemName);
//                        tryon.Add(dearlord.itemName);
//                    }
//                }
//            }
//            return tryon.ToArray();
//        }

//        public void Update()
//        {
//            if (PhotonNetwork.IsConnectedAndReady)
//            {
//                if (PluginConfig.spazallcosmeticstryon)
//                {
//                    string[] cosmetics = GetTryOnCosmetics();
//                    int amnt = math.clamp(cosmetics.Length, 0, 15);
//                    if (amnt > 0)
//                    {
//                        List<string> shit = new List<string> { };
//                        for (int i = 0; i <= amnt; i++)
//                        {
//                            shit.Add(cosmetics[UnityEngine.Random.Range(0, cosmetics.Length - 1)]);
//                        }
//                        if (shit != null && shit.Count > 0)
//                        {
//                            if (VRRig.LocalRig.inTryOnRoom)
//                            {
//                                CosmeticsController.instance.tryOnSet = new CosmeticsController.CosmeticSet(shit.ToArray(), CosmeticsController.instance);
//                                VRRig.LocalRig.tryOnSet = new CosmeticsController.CosmeticSet(shit.ToArray(), CosmeticsController.instance);
//                                GorillaTagger.Instance.myVRRig.SendRPC("RPC_UpdateCosmeticsWithTryon", RpcTarget.All, shit.ToArray(), shit.ToArray());

//                                PhotonNetwork.RaiseEvent(199, null, new RaiseEventOptions
//                                {
//                                    Receivers = ReceiverGroup.Others
//                                }, SendOptions.SendReliable);
//                            }
//                        }
//                        else
//                        {
//                            Debug.Log("[COLOSSAL] No cosmetics available.");
//                        }
//                    }
//                    RPCProtection.SkiddedRPCProtection();
//                }
//                else
//                {
//                    Destroy(this.GetComponent<SpazAllCosmeicsTryOn>());
//                }
//            }
//        }
//    }
//}
