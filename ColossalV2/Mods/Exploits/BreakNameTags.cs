using System.Collections;
using UnityEngine;
using Photon.Pun;
using Colossal.Menu;
using GorillaNetworking;
using System.Runtime.Remoting.Messaging;

namespace Colossal.Mods
{
    public class BreakNameTags : MonoBehaviour
    {
        string normalname;
        string fuckedname;

        public void Start()
        {
            normalname = PhotonNetwork.NickName;
            StartCoroutine(FlashNameTag());
        }

        public void Update()
        {
            if (!PluginConfig.breaknametags)
            {
                if (PhotonNetwork.LocalPlayer.NickName != normalname)
                {
                    PhotonNetwork.LocalPlayer.NickName = normalname;
                    GorillaComputer.instance.currentName = normalname;
                    GorillaComputer.instance.savedName = normalname;
                    PlayerPrefs.SetString("GorillaLocomotion.GTPlayerName", normalname);
                }

                StopCoroutine(FlashNameTag());
                Destroy(this.GetComponent<BreakNameTags>());


            }
        }

        private IEnumerator FlashNameTag()
        {
            while (true)
            {
                fuckedname = "<size=999><color=magenta>COLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP</color></size>";
                GorillaComputer.instance.currentName = fuckedname;
                GorillaComputer.instance.savedName = fuckedname;
                PlayerPrefs.SetString("GorillaLocomotion.GTPlayerName", fuckedname);

                yield return new WaitForSeconds(0.1f);

                fuckedname = "<size=999><color=white>COLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP\nCOLOSSAL ON TOP COLOSSAL ON TOP COLOSSAL ON TOP</color></size>";
                GorillaComputer.instance.currentName = fuckedname;
                GorillaComputer.instance.savedName = fuckedname;
                PlayerPrefs.SetString("GorillaLocomotion.GTPlayerName", fuckedname);

                yield return new WaitForSeconds(0.1f);
            }
        }
    }
}
